---
key: 201908016
title: HTTP2协议
tags: HTTP2
---

HTTP2 协议相比较 HTTP1 有诸多优势，越来越多应用程序使用HTTP2协议。<!--more-->

## HTTP2 与 HTTP1 区别

| | HTTP1 | HTTP2 | 对比说明 |
| --- | --- | --- |
| 消息编码格式 | 文本 | 二进制 | HTTP2 的二进制编码格式效率更高，但是问题定位更麻烦，需借助解码工具查看头或body |
| 消息压缩 | ```gzip encoding``` 压缩 ```body``` | ```gzip encoding``` 压缩 ```body```; 默认使用 ```HPACK``` 压缩头 | |
| HTTP请求/连接关系 | 单域多连接，每个连接同一时刻只允许一个请求 | 单域单连接，每个连接允许多请求并发(抽象为Stream) | HTTP2连接数量更少，特别是在TLS建连接耗时情况下效率提升明显；HTTP2 的多 Stream 并发并未解决 TCP 层面 HOL 问题，TCP顺序传包机制，如果前面包丢失重传，后面的包会被阻塞 |
| Server Push | 浏览器加载页面渲染后，再根据页面内定义的CSS/JS路径去请求资源 | 服务器端主动推送其猜测(??)的客户端需要缓存的内容 | |
| 消息优先级 | 协议本身没有 | 适合混杂页面，JS/CSS会被优先请求 | |

## Reference

[[译]使用HTTP/2提升性能的7个建议](https://www.w3ctech.com/topic/1563)

[HTTP/2 Frequently Asked Questions](https://http2.github.io/faq/#is-it-http20-or-http2)

[HTTP/2 TECHNOLOGY DEMO](http://www.http2demo.io/)